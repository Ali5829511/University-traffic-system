# ุจููุฉ Webhook - ุงูุชูุถูุญ ุงูููู

## ๐ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### โ ุงูุจููุฉ ุงูุตุญูุญุฉ (ุงูููุทุจููุฉ)

```
โโโโโโโโโโโโโโโโโโโโโโโ
โ   Cloud Service     โ
โ  (ุชุญููู ุงูููุญุงุช)    โ
โ  Plate Recognizer   โ
โโโโโโโโโโโโฌโโโโโโโโโโโ
           โ Cloud Webhook
           โ POST Request
           โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ     ParkPow API     โ
โโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูููุงุฆุฏ:**
- โ ุขููุฉ ูููุซููุฉ
- โ ูุง ุชุญุชุงุฌ ุฎุงุฏู ุฎุงุต
- โ ุณููุฉ ุงูุฅุนุฏุงุฏ ูุงูุตูุงูุฉ
- โ ูุนูุงูุฉ ูู ุญูุซ ุงูุชูููุฉ

---

### โ ุงูุจููุฉ ุบูุฑ ุงููุฏุนููุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Plate Recognizer   โ
โโโโโโโโโโโโฌโโโโโโโโโโโ
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ   ูุฐุง ุงูุชุทุจูู      โ  โ Client-side ููุท
โ  (ูุง ููููู ุงุณุชูุจุงู) โ  โ ูุง ููุฌุฏ Server
โโโโโโโโโโโโโโโโโโโโโโโ
```

**ููุงุฐุง ุบูุฑ ูุฏุนููุฉุ**
- โ ุงูุชุทุจูู Client-side (ูุนูู ูู ุงููุชุตูุญ)
- โ ูุง ููุฌุฏ Server-side endpoint
- โ ูุง ูููู ุงุณุชูุจุงู HTTP POST ูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ

---

## ๐ง ุฅุนุฏุงุฏ Webhook ูู Plate Recognizer

### ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ:

```yaml
Target URL: https://app.parkpow.com/api/v1/webhook-receiver/
Content-Type: application/json
Authorization: Token YOUR_PARKPOW_TOKEN
```

### ูุซุงู ุนูู ุงูุจูุงูุงุช ุงูููุฑุณูุฉ:

```json
{
  "hook": {
    "target": "https://app.parkpow.com/api/v1/webhook-receiver/"
  },
  "data": {
    "results": [
      {
        "plate": "ABC123",
        "region": {
          "code": "sa",
          "score": 0.95
        },
        "vehicle": {
          "type": "Sedan",
          "color": [
            {
              "color": "white",
              "confidence": 0.92
            }
          ]
        },
        "box": {
          "xmin": 100,
          "ymin": 150,
          "xmax": 300,
          "ymax": 250
        }
      }
    ],
    "filename": "camera-01-20240115-103000.jpg",
    "camera_id": "camera-01",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

---

## ๐ฏ ุฏูุฑ ูุฐุง ุงูุชุทุจูู

ุงูุชุทุจูู ูููุฑ:

### 1. ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
```javascript
// ุญูุธ ุนูุงููู Webhook
const webhookUrl = "https://app.parkpow.com/api/v1/webhook-receiver/"

// ุญูุธ Tokens ููุฑุฌูุน ุฅูููุง
const plateRecognizerToken = "YOUR_PLATE_RECOGNIZER_TOKEN"
const parkPowToken = "YOUR_PARKPOW_TOKEN"
```

### 2. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
```javascript
// ุงุฎุชุจุงุฑ ุงุชุตุงู ParkPow
async function testParkPowConnection() {
  const response = await fetch(webhookUrl, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Token ${parkPowToken}`
    },
    body: JSON.stringify({ test: true })
  });
  return response.ok;
}
```

### 3. ูุงุฌูุฉ ุฅุฏุงุฑุฉ
- ๐ ูุณุฎ ุงูุนูุงููู ูุงูู Tokens
- ๐ ุฏููู ุฅุนุฏุงุฏ ุชูุตููู
- ๐ ุฑูุงุจุท ูุจุงุดุฑุฉ ูููุญุงุช ุงูุชุญูู
- ๐งช ุงุฎุชุจุงุฑ ุงูุงุชุตุงูุงุช

### 4. ุฃุฏูุงุช ุฃุฎุฑู
- ุฅูุดุงุก ุชูุงุฑูุฑ PDF
- ุฅุฏุงุฑุฉ ุงููุฎุงููุงุช ูุงูุฒูุงุฑุงุช
- ุฑูุน ุงูุตูุฑ ุนุจุฑ FTP

---

## ๐ ุณููุงุฑูู ุงูุนูู ุงููุงูู

### ุงููุฑุญูุฉ 1: ุงูุฅุนุฏุงุฏ ุงูุฃููู

```
1. ุงููุณุชุฎุฏู ููุชุญ ุงูุชุทุจูู
2. ูุฐูุจ ุฅูู ุชุจููุจ "Webhook"
3. ููุณุฎ:
   - API Token (Plate Recognizer)
   - ParkPow Token
   - Webhook URL
```

### ุงููุฑุญูุฉ 2: ุชูููู Plate Recognizer

```
1. ุงููุณุชุฎุฏู ููุชุญ ููุญุฉ Plate Recognizer
2. ูุณุฌู ุฏุฎูู ุจู API Token
3. ูุถูู Webhook ุฌุฏูุฏ:
   - Target: ุนููุงู ParkPow
   - Authorization: ParkPow Token
```

### ุงููุฑุญูุฉ 3: ุงูุชุดุบูู

```
1. ุงููุงููุฑุง ุชูุชูุท ุตูุฑุฉ ูุฑูุจุฉ
2. ุงูุตูุฑุฉ ุชูุฑูุน ุฅูู Plate Recognizer (FTP ุฃู API)
3. Plate Recognizer ูุญูู ุงูุตูุฑุฉ
4. ุงููุชุงุฆุฌ ุชูุฑุณู ูุจุงุดุฑุฉ ุฅูู ParkPow
5. ParkPow ูุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุชู
```

### ุงููุฑุญูุฉ 4: ุงููุชุงุจุนุฉ

```
1. ุงููุณุชุฎุฏู ูุณุชุฎุฏู ุงูุชุทุจูู:
   - ูุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงููุณุชูุฑุฏุฉ
   - ูุฅูุดุงุก ุงูุชูุงุฑูุฑ
   - ูุชุชุจุน ุงููุฎุงููุงุช
```

---

## ๐ ุงูุฃูุงู ูุงูููุซูููุฉ

### ุทุจูุงุช ุงูุฃูุงู:

1. **HTTPS ููุท**
   - ุฌููุน ุงูุงุชุตุงูุงุช ูุดูุฑุฉ
   - ูุง ููุฌุฏ HTTP plain text

2. **Token Authentication**
   ```
   Authorization: Token YOUR_PARKPOW_TOKEN
   ```
   - ูู ุทูุจ ูุชุทูุจ Token ุตุญูุญ
   - Token ูุญูู ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ

3. **Webhook Verification**
   - ParkPow ูุชุญูู ูู ูุตุฏุฑ ุงูุทูุจ
   - ุฑูุถ ุงูุทูุจุงุช ุบูุฑ ุงูููุซููุฉ

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:

```javascript
// ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ
retry_policy = {
  retry_count: 3,
  retry_delay: ['30s', '5min', '30min']
}

// ุณุฌู ุงูุฃุฎุทุงุก
error_log = {
  timestamp: "2024-01-15T10:30:00Z",
  status: 401,
  message: "Invalid Token"
}
```

---

## ๐ ุงููุฑุงูุจุฉ ูุงูุชุชุจุน

### ูู Plate Recognizer:
- โ ุณุฌู ุฌููุน ุงูู Webhook calls
- โ ุญุงูุฉ ุงููุฌุงุญ/ุงููุดู
- โ ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ
- โ ุฃุฎุทุงุก ุงูุชูุงุตูููุฉ

### ูู ParkPow:
- โ ุณุฌู ุงูุจูุงูุงุช ุงููุณุชูุจูุฉ
- โ ุชุญููู ุงูููุญุงุช ุงูููุชุดูุฉ
- โ ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู

### ูู ูุฐุง ุงูุชุทุจูู:
- โ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- โ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช
- โ ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูุญูููุง

---

## ๐ ุชุญุณููุงุช ุงููุณุชูุจู

### ุฅููุงููุงุช ูุญุชููุฉ:

1. **Webhook Proxy Service** (ุฎุงุฑุฌ ุงูุชุทุจูู)
   ```
   Plate Recognizer โ Proxy Server โ ParkPow + ุงูุชุทุจูู
   ```
   - ูุนุงูุฌุฉ ูุชูุฏูุฉ ููุจูุงูุงุช
   - ุฅุดุนุงุฑุงุช ููุฑูุฉ
   - ุชุตููุฉ ูุชูุธูู ุงูุจูุงูุงุช

2. **Real-time Dashboard**
   - WebSocket ุงุชุตุงู
   - ุฅุดุนุงุฑุงุช ููุฑูุฉ
   - ุชุญููู ูุจุงุดุฑ

3. **Multi-destination Forwarding**
   - ุฅุฑุณุงู ุฅูู ุฃูุซุฑ ูู ูุฌูุฉ
   - ุชูุณููุงุช ูุฎุชููุฉ ููู ูุฌูุฉ

---

## ๐ ูุฑุงุฌุน ุชูููุฉ

### Plate Recognizer Webhooks:
- [Documentation](https://docs.platerecognizer.com/webhooks/)
- [Dashboard](https://app.platerecognizer.com/service/snapshot-cloud/webhooks/)

### ParkPow API:
- [API Endpoint](https://app.parkpow.com/api/v1/webhook-receiver/)
- [Token Management](https://app.parkpow.com/accounts/token/)

---

## ๐ก ุงูุฎูุงุตุฉ

**ุงูุจููุฉ ุงูุญุงููุฉ ูู ุงูุฃูุซู** ููุฐุง ุงูููุน ูู ุงูุชุทุจููุงุช:
- โ ุจุณูุทุฉ ููุจุงุดุฑุฉ
- โ ุขููุฉ ูููุซููุฉ
- โ ุณููุฉ ุงูุฅุนุฏุงุฏ ูุงูุตูุงูุฉ
- โ ูุนูุงูุฉ ูู ุญูุซ ุงูุชูููุฉ (ูุง ุญุงุฌุฉ ูุฎุงุฏู ุฅุถุงูู)

**ุฏูุฑ ุงูุชุทุจูู ุงูุฑุฆูุณู:**
- ๐๏ธ ุฃุฏูุงุช ุฅุฏุงุฑุฉ ูุชูููู
- ๐ ูุนุงูุฌุฉ ูุชุญููู ุงูุจูุงูุงุช
- ๐ ุฅูุดุงุก ุงูุชูุงุฑูุฑ
- ๐ค ุชุตุฏูุฑ ูุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** ูุธุงู ุฅุฏุงุฑุฉ ููุงูู ุงูุณูุงุฑุงุช ูุงููุฎุงููุงุช  
**ุฌุงูุนุฉ ุงูุฅูุงู ูุญูุฏ ุจู ุณุนูุฏ ุงูุฅุณูุงููุฉ**
